<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片显示测试 - Find 3D</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .image-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background: white;
        }
        .image-placeholder {
            width: 100%;
            height: 200px;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 14px;
        }
        .image-content {
            padding: 15px;
        }
        .image-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .image-url {
            font-size: 12px;
            color: #666;
            word-break: break-all;
        }
        .test-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .error-image {
            background: #ffebee;
            color: #c62828;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🖼️ Find 3D 图片显示测试</h1>
        
        <div class="test-section">
            <h2>测试说明</h2>
            <p>这个页面用于测试各种图片URL的显示效果，包括：</p>
            <ul>
                <li>魔顿网的图片URL</li>
                <li>其他3D素材网站的图片</li>
                <li>占位符图片</li>
                <li>错误处理</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>图片显示测试</h2>
            <div class="image-grid" id="imageGrid">
                <!-- 图片将通过JavaScript动态生成 -->
            </div>
        </div>

        <div class="test-section">
            <h2>搜索结果模拟</h2>
            <button onclick="simulateSearch()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
                模拟搜索并显示结果
            </button>
            <div id="searchResults" style="margin-top: 20px;"></div>
        </div>
    </div>

    <script>
        // 测试图片URL列表
        const testImages = [
            {
                title: '魔顿网示例图片1',
                url: 'http://www.modown.cn/wp-content/uploads/2023/12/example1.jpg',
                source: '魔顿网'
            },
            {
                title: '魔顿网示例图片2', 
                url: 'https://www.modown.cn/wp-content/themes/modown/images/default-thumb.jpg',
                source: '魔顿网'
            },
            {
                title: 'CG资源网示例',
                url: 'https://www.cgown.com/images/placeholder.jpg',
                source: 'CG资源网'
            },
            {
                title: '书生CG资源站示例',
                url: 'https://c4dsky.com/wp-content/uploads/placeholder.jpg',
                source: '书生CG资源站'
            },
            {
                title: '3D溜溜网示例',
                url: 'https://www.3dxy.com/images/default.jpg',
                source: '3D溜溜网'
            },
            {
                title: '占位符图片',
                url: generatePlaceholderImage('#4ecdc4', '测试图片'),
                source: '本地生成'
            },
            {
                title: '无效图片URL',
                url: 'https://invalid-url-test.com/nonexistent.jpg',
                source: '错误测试'
            }
        ];

        // 生成占位符图片
        function generatePlaceholderImage(color, text) {
            const canvas = document.createElement('canvas');
            canvas.width = 300;
            canvas.height = 200;
            const ctx = canvas.getContext('2d');
            
            // 背景
            ctx.fillStyle = color;
            ctx.fillRect(0, 0, 300, 200);
            
            // 文字
            ctx.fillStyle = 'white';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(text, 150, 100);
            
            return canvas.toDataURL();
        }

        // 渲染测试图片
        function renderTestImages() {
            const grid = document.getElementById('imageGrid');
            
            grid.innerHTML = testImages.map((img, index) => `
                <div class="image-card">
                    <div class="image-placeholder" id="placeholder-${index}">
                        <img src="${img.url}" 
                             alt="${img.title}" 
                             class="test-image"
                             onload="handleImageLoad(${index})"
                             onerror="handleImageError(${index}, '${img.url}')">
                    </div>
                    <div class="image-content">
                        <div class="image-title">${img.title}</div>
                        <div class="image-url">来源: ${img.source}</div>
                        <div class="image-url">URL: ${img.url.substring(0, 50)}${img.url.length > 50 ? '...' : ''}</div>
                        <div id="status-${index}" style="margin-top: 5px; font-size: 12px;"></div>
                    </div>
                </div>
            `).join('');
        }

        // 处理图片加载成功
        function handleImageLoad(index) {
            const status = document.getElementById(`status-${index}`);
            status.innerHTML = '<span style="color: green;">✅ 加载成功</span>';
            console.log(`图片 ${index} 加载成功:`, testImages[index].url);
        }

        // 处理图片加载失败
        function handleImageError(index, url) {
            const placeholder = document.getElementById(`placeholder-${index}`);
            const status = document.getElementById(`status-${index}`);
            
            placeholder.classList.add('error-image');
            placeholder.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 24px; margin-bottom: 10px;">❌</div>
                    <div>图片加载失败</div>
                    <div style="font-size: 10px; margin-top: 5px;">可能是跨域或URL无效</div>
                </div>
            `;
            
            status.innerHTML = '<span style="color: red;">❌ 加载失败</span>';
            console.error(`图片 ${index} 加载失败:`, url);
        }

        // 模拟搜索结果
        function simulateSearch() {
            const resultsDiv = document.getElementById('searchResults');
            resultsDiv.innerHTML = '<div style="text-align: center; padding: 20px;">正在搜索中...</div>';
            
            setTimeout(() => {
                const mockResults = [
                    {
                        title: '现代建筑3D模型',
                        description: '高质量现代建筑模型，包含材质贴图',
                        image: generatePlaceholderImage('#ff6b6b', '建筑模型'),
                        source: '魔顿网',
                        price: 0,
                        downloads: 1234
                    },
                    {
                        title: '日式庭院场景',
                        description: '精美日式庭院场景，适合建筑可视化',
                        image: generatePlaceholderImage('#4ecdc4', '庭院场景'),
                        source: 'CG资源网',
                        price: 50,
                        downloads: 856
                    },
                    {
                        title: '室内家具套装',
                        description: '完整的室内家具3D模型套装',
                        image: generatePlaceholderImage('#45b7d1', '家具套装'),
                        source: '书生CG资源站',
                        price: 0,
                        downloads: 2341
                    }
                ];
                
                resultsDiv.innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px;">
                        ${mockResults.map(result => `
                            <div style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; background: white;">
                                <div style="width: 100%; height: 150px; background: #f0f0f0; display: flex; align-items: center; justify-content: center;">
                                    <img src="${result.image}" alt="${result.title}" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div style="padding: 10px;">
                                    <h4 style="margin: 0 0 5px 0; font-size: 14px;">${result.title}</h4>
                                    <p style="margin: 0 0 8px 0; font-size: 12px; color: #666;">${result.description}</p>
                                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 12px;">
                                        <span style="color: #666;">${result.source}</span>
                                        <span style="color: ${result.price === 0 ? '#28a745' : '#007bff'}; font-weight: bold;">
                                            ${result.price === 0 ? '免费' : `¥${result.price}`}
                                        </span>
                                    </div>
                                    <div style="margin-top: 5px; font-size: 11px; color: #999;">
                                        📥 ${result.downloads} 次下载
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }, 1000);
        }

        // 页面加载完成后渲染测试图片
        window.addEventListener('load', function() {
            renderTestImages();
            console.log('🖼️ 图片显示测试页面已加载');
            console.log('测试图片数量:', testImages.length);
        });
    </script>
</body>
</html>